# 终端扫雷游戏 - 项目介绍

## 1. 项目概述

- 基于Python实现的纯终端扫雷游戏
- 支持Windows和类Unix系统
- 使用相对坐标系统辅助定位(类似vim)
- 实现了扫雷游戏的所有核心功能

## 2. 项目演示

- 游戏玩法展示
- 不同的终端兼容性展示
- 不同平台展示(windows, linux, android)

## 3. 技术架构

### 3.1 无缓冲输入实现
- 相关函数: `make_getch()`, `getch()`
- Windows系统：调用msvcrt库中的getch实现
- 类Unix系统：使用termios和tty库实现
- 高阶函数封装平台判定过程
- 方向键和特殊键位映射处理

### 3.2 终端界面设计与ANSI转义序列
- 基础函数: `move()`, `cout()`, `cline()`, `cls()`, `hide_cursor()`等等(这里会插图片)
- 界面函数: `print_all()`, `show_relevant()`, `show_line()`, `show_col()`, `clear_bg()`(这里会插图片)
- 使用跨平台库colorama处理终端颜色
- colorama库是对ansi转义序列的封装
- ANSI转义序列基本原理：\033[组合实现特定功能
- 抽象屏障设计：
  - 第一层：封装ANSI转义序列实现基础函数(移动、清屏、颜色等)
  - 第二层：封装基础函数实现游戏界面绘制功能
- 相对坐标系统设计与实现: `move_info()`

## 4. 游戏核心逻辑

### 4.1 键盘输入处理与信息打印
- 相关函数: `get_key()`, `print_message()`
- 使用缓冲区处理数字键连续输入
- 多种按键映射支持(WASD/HJKL和方向键)
- 特殊键位处理(退格、标记、揭示等)
- 异常处理与错误信息显示

### 4.2 光标移动与位置计算
- 相关函数: `move_cursor_info()`, `clear_bg()`, `show_relevant()`
- 使用缓冲区实现多步移动
- 移动边界检测防止越界(使用max，min简化)
- 背景高亮实现与清除
- 相对坐标显示逻辑
- 光标位置和当前的格子位置并不相同，光标通过hide_cursor隐藏掉了

### 4.3 格子揭示算法
- 相关函数: `click_item()`, `inner()` (递归DFS), `cal_count()`, `is_boom()`
- 判定格子状态: `get_item()`
- 炸弹判定与游戏结束处理: `print_boom()`, `exiting()`
- DFS算法实现连续空白区域的自动揭示
- 计算周围炸弹数量并显示: `count_remain()`

### 4.4 炸弹生成与获取棋盘配置
- 利用randint，并用高阶函数封装了randline实现代码的易用性
- 利用集合运算防止加入生成的重复位置引起bug
- 通过sys.args获得用户命令行输入参数，通过map将其转为int型，利用星号表达式展开序列

## 5. 项目特色与创新点

- 完全基于终端的可视化实现
- 相对坐标系统提升用户体验
- 跨平台兼容设计
- 支持数字键快速多格移动
- 彩色界面与直观的用户反馈

## 6. 项目总结与技术亮点

- 使用的Python特性总结(高阶函数、列表推导式.星号表达式等)
- lambda函数与默认参数定制
- 闭包与函数式编程思想
- DFS算法的应用
- 跨平台设计与兼容性考虑